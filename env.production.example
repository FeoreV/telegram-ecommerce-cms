# =============================================================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# Telegram E-commerce CMS Platform
# =============================================================================
# ⚠️ ВАЖНО: Скопируйте этот файл в .env.production и замените все значения!
# Команда: cp env.production.example .env.production
# =============================================================================

# =============================================================================
# DATABASE CONFIGURATION (PostgreSQL)
# =============================================================================
DATABASE_PROVIDER=postgresql
DATABASE_URL=postgresql://postgres:CHANGE_THIS_PASSWORD@postgres:5432/telegram_ecommerce
POSTGRES_DB=telegram_ecommerce
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE_THIS_PASSWORD
POSTGRES_PORT=5432

# Connection Pool Settings
DATABASE_MAX_CONNECTIONS=100
DATABASE_TIMEOUT=5000

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_URL=redis://redis:6379
REDIS_PASSWORD=
REDIS_PORT=6379
REDIS_MAX_RETRIES=3
REDIS_TTL=3600

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
NODE_ENV=production
API_URL=https://yourdomain.com/api
FRONTEND_URL=https://yourdomain.com
WEBHOOK_BASE_URL=https://yourdomain.com

# Port Configuration
BACKEND_PORT=3001
FRONTEND_PORT=3000
BOT_WEBHOOK_PORT=8443
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# JWT Secrets (Generate with: openssl rand -base64 64)
JWT_SECRET=CHANGE_THIS_TO_VERY_LONG_RANDOM_STRING_MIN_64_CHARS
JWT_REFRESH_SECRET=CHANGE_THIS_TO_ANOTHER_VERY_LONG_RANDOM_STRING_MIN_64_CHARS
JWT_ACCESS_TOKEN_EXPIRES_IN=15m
JWT_REFRESH_TOKEN_EXPIRES_IN=7d
JWT_AUDIENCE=botrt-admin-panel

# Session Secrets
SESSION_SECRET=CHANGE_THIS_SESSION_SECRET_MIN_32_CHARS
COOKIE_SECRET=CHANGE_THIS_COOKIE_SECRET_MIN_32_CHARS

# Encryption Key IDs (Generate with: openssl rand -hex 32)
# These should be unique identifiers for different encryption contexts
SECURITY_LOGS_KEY_ID=CHANGE_THIS_TO_RANDOM_HEX_64_CHARS
SBOM_SIGNING_KEY_ID=CHANGE_THIS_TO_RANDOM_HEX_64_CHARS
COMMUNICATION_KEY_ID=CHANGE_THIS_TO_RANDOM_HEX_64_CHARS
WEBSOCKET_KEY_ID=CHANGE_THIS_TO_RANDOM_HEX_64_CHARS
BACKUP_KEY_ID=CHANGE_THIS_TO_RANDOM_HEX_64_CHARS
STORAGE_KEY_ID=CHANGE_THIS_TO_RANDOM_HEX_64_CHARS
LOG_KEY_ID=CHANGE_THIS_TO_RANDOM_HEX_64_CHARS

# Algorithm specifications
HASH_ALGORITHM=sha256
ENCRYPTION_ALGORITHM=aes-256-gcm

# API Security
API_RATE_LIMIT_WINDOW_MS=900000
API_RATE_LIMIT_MAX=100
API_RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=true

# CORS Configuration
CORS_ORIGIN=https://yourdomain.com,https://admin.yourdomain.com
CORS_CREDENTIALS=true

# CSRF Protection
ENABLE_CSRF_PROTECTION=true
CSRF_COOKIE_NAME=_csrf
CSRF_HEADER_NAME=X-CSRF-Token

# =============================================================================
# TELEGRAM BOT CONFIGURATION
# =============================================================================
TELEGRAM_BOT_TOKEN=YOUR_BOT_TOKEN_FROM_BOTFATHER

# Webhook Configuration (Production)
WEBHOOK_PATH=/webhook/telegram
WEBHOOK_SECRET=CHANGE_THIS_WEBHOOK_SECRET
WEBHOOK_ADMIN_TOKEN=CHANGE_THIS_ADMIN_TOKEN
WEBHOOK_PORT=8443

# Bot Security Settings
RATE_LIMIT_MAX_REQUESTS=30
RATE_LIMIT_WINDOW_MS=60000
SPAM_MAX_MESSAGES_PER_MINUTE=10
SPAM_SUSPICION_THRESHOLD=50
SPAM_BAN_DURATION=3600000

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=info
LOG_FILE=./logs/app.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5
LOG_DATE_PATTERN=YYYY-MM-DD

# Structured Logging
ENABLE_JSON_LOGS=true
LOG_REQUESTS=true
LOG_ERRORS=true

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================

# Prometheus
PROMETHEUS_PORT=9090
ENABLE_METRICS=true
METRICS_ENDPOINT=/metrics

# Grafana
GRAFANA_PORT=3030
GRAFANA_ADMIN_PASSWORD=CHANGE_THIS_GRAFANA_PASSWORD

# Elasticsearch
ELASTICSEARCH_PORT=9200

# Kibana
KIBANA_PORT=5601

# Health Checks
ENABLE_HEALTH_CHECKS=true
HEALTH_CHECK_INTERVAL=30000

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_DESTINATION=/backups

# =============================================================================
# FEATURE FLAGS
# =============================================================================
ENABLE_ADMINJS=false
ENABLE_WEBHOOK_MODE=true
ENABLE_RATE_LIMITING=true
ENABLE_AUDIT_LOGGING=true
ENABLE_PERFORMANCE_MONITORING=true
ENABLE_SECURITY=true

# =============================================================================
# SSL/TLS CONFIGURATION
# =============================================================================
USE_HTTPS=true
SSL_CERT_PATH=/etc/nginx/ssl/certificate.crt
SSL_KEY_PATH=/etc/nginx/ssl/private.key

# =============================================================================
# EMAIL CONFIGURATION (Optional)
# =============================================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password
SMTP_FROM=noreply@yourdomain.com

# =============================================================================
# PAYMENT CONFIGURATION (if applicable)
# =============================================================================
# Add your payment provider credentials here

# =============================================================================
# DOCKER CONFIGURATION
# =============================================================================
COMPOSE_PROJECT_NAME=telegram_ecommerce_prod
COMPOSE_FILE=config/docker/docker-compose.postgres-prod.yml

