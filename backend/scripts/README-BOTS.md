# Утилиты для управления ботами

## Проверка статуса бота

Проверить есть ли токен у бота и его статус:

```bash
node backend/scripts/check-bot-token.js <имя_магазина_или_бота>
```

Пример:
```bash
node backend/scripts/check-bot-token.js paymenttest
```

## Добавление токена боту

Добавить токен для существующего магазина:

```bash
node backend/scripts/add-bot-token.js <STORE_ID> "<BOT_TOKEN>"
```

Пример:
```bash
node backend/scripts/add-bot-token.js cmg9asld800056s4cqgw1xufd "1234567890:ABCdefGhIJklmNOpqRStuvwXYz"
```

⚠️ **Важно**: Токен нужно заключить в кавычки!

## Пошаговая инструкция для магазина paymenttest

1. **Получите токен от @BotFather в Telegram**
   - Отправьте `/newbot`
   - Введите имя бота
   - Введите username (должен заканчиваться на "bot")
   - Скопируйте полученный токен

2. **Добавьте токен через скрипт**
   ```bash
   node backend/scripts/add-bot-token.js cmg9asld800056s4cqgw1xufd "ВАШ_ТОКЕН"
   ```

3. **Обновите страницу в админке**
   - Перейдите в "Телеграм боты"
   - Теперь должны появиться кнопки действий

4. **Активируйте бота**
   - Нажмите кнопку "Перезапустить" чтобы запустить бота

## Частые проблемы

### Нет действий на странице ботов

**Причина**: У магазина нет токена бота в базе данных

**Решение**: Добавьте токен через админку или используйте скрипт `add-bot-token.js`

### Токен неверного формата

**Правильный формат**: `1234567890:ABCdefGhIJklmNOpqRStuvwXYz`
- Начинается с цифр (ID бота)
- Двоеточие
- Буквы, цифры, дефисы, подчеркивания

### Токен уже используется

**Причина**: Один токен не может использоваться для двух магазинов

**Решение**: Создайте нового бота через @BotFather

## Проверка всех ботов

Посмотреть список всех магазинов и их ботов:

```bash
node backend/scripts/check-bot-token.js ""
```

Эта команда покажет все доступные магазины.

