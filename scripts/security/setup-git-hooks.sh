#!/bin/bash
# Setup Git Hooks for Security
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç git hooks –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

set -e

echo "üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Git Hooks –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏..."
echo "=========================================="
echo ""

# –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é hooks –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
if [ ! -d ".git/hooks" ]; then
    echo "‚ùå –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è .git/hooks –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
    echo "   –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä–Ω–µ git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è"
    exit 1
fi

# –ö–æ–ø–∏—Ä—É–µ–º pre-commit hook
echo "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ pre-commit hook..."
if [ -f ".githooks/pre-commit" ]; then
    cp .githooks/pre-commit .git/hooks/pre-commit
    chmod +x .git/hooks/pre-commit
    echo "‚úÖ Pre-commit hook —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
else
    echo "‚ùå –§–∞–π–ª .githooks/pre-commit –Ω–µ –Ω–∞–π–¥–µ–Ω"
    exit 1
fi

# –¢–µ—Å—Ç–∏—Ä—É–µ–º hook
echo ""
echo "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ hook..."
if .git/hooks/pre-commit; then
    echo "‚úÖ Hook —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ"
else
    echo "‚ö†Ô∏è  Hook –≤—ã–¥–∞–ª –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ)"
fi

echo ""
echo "=========================================="
echo "‚úÖ Git hooks —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã!"
echo ""
echo "–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∫–æ–º–º–∏—Ç–µ –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å—Å—è:"
echo "  - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –∫–æ–¥–µ"
echo "  - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ .env —Ñ–∞–π–ª–æ–≤"
echo "  - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ hardcoded credentials"
echo "  - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ debug –∫–æ–¥–∞"
echo ""
echo "–î–ª—è –ø—Ä–æ–ø—É—Å–∫–∞ –ø—Ä–æ–≤–µ—Ä–æ–∫ (–ù–ï –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø):"
echo "  git commit --no-verify"
echo ""

