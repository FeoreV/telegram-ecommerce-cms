# ‚ö° –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ HTTPS

## –î–≤–∞ —Å–ø–æ—Å–æ–±–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ HTTPS:

### üü¢ –°–ø–æ—Å–æ–± 1: Caddy (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø - —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π)

Caddy –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç 5 –º–∏–Ω—É—Ç!

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd ~/telegram-ecommerce-cms
git pull
chmod +x scripts/setup-caddy.sh
sudo ./scripts/setup-caddy.sh
```

–°–∫—Ä–∏–ø—Ç —Å–ø—Ä–æ—Å–∏—Ç –≤–∞—à –¥–æ–º–µ–Ω –∏ –≤—Å—ë –Ω–∞—Å—Ç—Ä–æ–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!

---

### üîµ –°–ø–æ—Å–æ–± 2: Nginx (–±–æ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è)

–î–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd ~/telegram-ecommerce-cms
git pull
chmod +x scripts/setup-https.sh
sudo ./scripts/setup-https.sh
```

---

## –ß—Ç–æ –≤–∞–º –Ω—É–∂–Ω–æ –ü–ï–†–ï–î –Ω–∞—á–∞–ª–æ–º:

1. **–î–æ–º–µ–Ω** - –∫—É–ø–∏—Ç–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π (DuckDNS, FreeDNS)
2. **DNS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** - –¥–æ–±–∞–≤—å—Ç–µ A –∑–∞–ø–∏—Å–∏:
   ```
   mystore.com          ‚Üí  82.147.84.78
   www.mystore.com      ‚Üí  82.147.84.78
   api.mystore.com      ‚Üí  82.147.84.78
   ```
3. **–ü–æ–¥–æ–∂–¥–∏—Ç–µ** 5-60 –º–∏–Ω—É—Ç –ø–æ–∫–∞ DNS –æ–±–Ω–æ–≤–∏—Ç—Å—è

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DNS:
```bash
nslookup mystore.com
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: 82.147.84.78
```

---

## –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:

1. **–ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
```bash
# Backend
cd ~/telegram-ecommerce-cms/backend
npm run build
pm2 restart backend

# Frontend
cd ~/telegram-ecommerce-cms/frontend
npm run build
pm2 restart frontend
```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```bash
# –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –∑–∞–º–æ—á–µ–∫ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
firefox https://mystore.com
firefox https://api.mystore.com/health
```

---

## –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

- **HTTPS_SETUP_GUIDE.md** - –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- **nginx-config-example.conf** - –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx
- **Caddyfile.example** - –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Caddy

---

## –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã:

### –£ –º–µ–Ω—è –Ω–µ—Ç –¥–æ–º–µ–Ω–∞
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã:
- **DuckDNS** - https://www.duckdns.org (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–æ–¥–¥–æ–º–µ–Ω)
- **FreeDNS** - https://freedns.afraid.org
- **No-IP** - https://www.noip.com

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ SSL —Ä–∞–±–æ—Ç–∞–µ—Ç?
```bash
curl -I https://mystore.com
# –ò—â–∏—Ç–µ: HTTP/2 200
```

–ò–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –∑–∞–º–æ—á–∫–∞ üîí

### –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–î–ª—è Caddy:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
```bash
journalctl -u caddy -f
```

**–î–ª—è Nginx:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
sudo certbot renew --dry-run

# –°—Ç–∞—Ç—É—Å —Ç–∞–π–º–µ—Ä–∞
sudo systemctl status certbot.timer
```

### CORS –æ—à–∏–±–∫–∏ –ø–æ—Å–ª–µ –≤–∫–ª—é—á–µ–Ω–∏—è HTTPS

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ `.env` –≤—Å–µ URL –∏—Å–ø–æ–ª—å–∑—É—é—Ç `https://`:
```bash
cd ~/telegram-ecommerce-cms/backend
nano .env

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
FRONTEND_URL=https://mystore.com
CORS_WHITELIST=https://mystore.com,https://api.mystore.com
```

–ó–∞—Ç–µ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
npm run build
pm2 restart backend
```

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚úÖ –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ HTTPS:
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ —à–∏—Ñ—Ä—É—é—Ç—Å—è
- Cookies —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- Telegram Login Widget —Ä–∞–±–æ—Ç–∞–µ—Ç
- Google –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç —Å–∞–π—Ç –ª—É—á—à–µ
- –ë—Ä–∞—É–∑–µ—Ä—ã –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

‚ö†Ô∏è **–ù–µ –∑–∞–±—É–¥—å—Ç–µ:**
- –û–±–Ω–æ–≤–∏—Ç—å URL –≤ Telegram Bot Settings
- –û–±–Ω–æ–≤–∏—Ç—å URL –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø–ª–∞—Ç–µ–∂–µ–π (–µ—Å–ª–∏ –µ—Å—Ç—å)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å webhook URL –¥–ª—è Telegram

---

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
```bash
# Caddy
journalctl -u caddy -f

# Nginx
sudo tail -f /var/log/nginx/error.log

# Backend
pm2 logs backend

# Frontend
pm2 logs frontend
```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall:**
```bash
sudo ufw status
# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã –ø–æ—Ä—Ç—ã 80 –∏ 443
```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã:**
```bash
pm2 status
sudo systemctl status nginx  # –∏–ª–∏ caddy
```

---

**–ì–æ—Ç–æ–≤–æ!** üéâ –í–∞—à —Å–∞–π—Ç —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ HTTPS!

