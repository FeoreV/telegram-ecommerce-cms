# Production Environment Configuration for Telegram E-commerce Bot Platform

# =============================================================================
# DATABASE CONFIGURATION (PostgreSQL)
# =============================================================================
DATABASE_URL=postgresql://postgres:your_secure_password@localhost:5432/telegram_ecommerce
POSTGRES_DB=telegram_ecommerce
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_secure_password
POSTGRES_PORT=5432

# Connection Pool Settings
DATABASE_MAX_CONNECTIONS=100
DATABASE_TIMEOUT=5000

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=your_redis_password
REDIS_PORT=6379
REDIS_MAX_RETRIES=3
REDIS_TTL=3600

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
NODE_ENV=production
API_URL=https://yourdomain.com/api
FRONTEND_URL=https://yourdomain.com
WEBHOOK_BASE_URL=https://yourdomain.com

# Port Configuration
BACKEND_PORT=3001
FRONTEND_PORT=3000
BOT_WEBHOOK_PORT=8443
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# JWT Secrets (Generate with: openssl rand -base64 64)
JWT_SECRET=your_very_long_jwt_secret_minimum_32_characters_for_production
JWT_REFRESH_SECRET=your_very_long_jwt_refresh_secret_minimum_32_characters_for_production
JWT_ACCESS_TOKEN_EXPIRES_IN=15m
JWT_REFRESH_TOKEN_EXPIRES_IN=7d

# API Security
API_RATE_LIMIT_WINDOW_MS=900000
API_RATE_LIMIT_MAX=100
API_RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=true

# CORS Configuration
CORS_ORIGIN=https://yourdomain.com,https://admin.yourdomain.com
CORS_CREDENTIALS=true

# Session Security
SESSION_SECRET=your_session_secret_for_adminjs
COOKIE_SECRET=your_cookie_secret_key

# =============================================================================
# TELEGRAM BOT CONFIGURATION
# =============================================================================
TELEGRAM_BOT_TOKEN=your_bot_token_from_botfather

# Webhook Configuration (Production)
WEBHOOK_PATH=/webhook/telegram
WEBHOOK_SECRET=your_webhook_secret_key
WEBHOOK_ADMIN_TOKEN=your_admin_webhook_token

# Bot Security Settings
RATE_LIMIT_MAX_REQUESTS=30
RATE_LIMIT_WINDOW_MS=60000
SPAM_MAX_MESSAGES_PER_MINUTE=10
SPAM_SUSPICION_THRESHOLD=50
SPAM_BAN_DURATION=3600000

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=info
LOG_FILE=./logs/app.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5
LOG_DATE_PATTERN=YYYY-MM-DD

# Structured Logging
ENABLE_JSON_LOGS=true
LOG_REQUESTS=true
LOG_ERRORS=true

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================

# Prometheus
PROMETHEUS_PORT=9090
ENABLE_METRICS=true
METRICS_ENDPOINT=/metrics

# Grafana
GRAFANA_PORT=3001
GRAFANA_ADMIN_PASSWORD=your_secure_grafana_password

# Health Checks
ENABLE_HEALTH_CHECKS=true
HEALTH_CHECK_INTERVAL=30000

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_DESTINATION=./backups

# =============================================================================
# FEATURE FLAGS
# =============================================================================
ENABLE_ADMINJS=false
ENABLE_WEBHOOK_MODE=true
ENABLE_RATE_LIMITING=true
ENABLE_AUDIT_LOGGING=true
ENABLE_PERFORMANCE_MONITORING=true
