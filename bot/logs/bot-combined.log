{"isProduction":true,"level":"info","message":"Initializing Telegram Bot","port":"3003","service":"telegram-bot","timestamp":"2025-10-04T13:02:04.473Z","useWebhook":true,"webhookBaseUrl":"http://82.147.84.78"}
{"error":{"code":"ECONNREFUSED"},"level":"error","message":"Bot Redis client error","service":"telegram-bot","timestamp":"2025-10-04T13:02:04.814Z"}
{"error":{"code":"ECONNREFUSED"},"level":"error","message":"Bot Redis client error","service":"telegram-bot","timestamp":"2025-10-04T13:02:04.832Z"}
{"error":{"code":"ECONNREFUSED"},"level":"error","message":"Bot Redis client error","service":"telegram-bot","timestamp":"2025-10-04T13:02:04.942Z"}
{"error":{"code":"ECONNREFUSED"},"level":"error","message":"Bot Redis client error","service":"telegram-bot","timestamp":"2025-10-04T13:02:05.145Z"}
{"level":"warn","message":"Redis reconnection failed after 3 attempts, using in-memory fallback","service":"telegram-bot","timestamp":"2025-10-04T13:02:05.454Z"}
{"error":{"code":"ECONNREFUSED"},"level":"error","message":"Bot Redis client error","service":"telegram-bot","timestamp":"2025-10-04T13:02:05.454Z"}
{"error":{"code":"ECONNREFUSED"},"level":"error","message":"Failed to initialize bot Redis session store","service":"telegram-bot","timestamp":"2025-10-04T13:02:05.454Z"}
{"code":"ECONNREFUSED","level":"warn","message":"Redis session store initialization failed, using in-memory fallback:","service":"telegram-bot","stack":"AggregateError\n    at internalConnectMultiple (node:net:1134:18)\n    at afterConnectMultiple (node:net:1715:7)","timestamp":"2025-10-04T13:02:05.454Z"}
{"level":"info","message":"Bot will continue without Redis (development mode)","service":"telegram-bot","timestamp":"2025-10-04T13:02:05.454Z"}
{"level":"info","message":"CMS initialized at http://localhost:9000","service":"telegram-bot","timestamp":"2025-10-04T13:02:05.455Z"}
{"level":"info","message":"âœ… Bot handlers configured","service":"telegram-bot","timestamp":"2025-10-04T13:02:05.455Z"}
{"config":{"adminSafety":{"logAllActions":true,"requireConfirmation":true},"rateLimit":{"blockDuration":300000,"maxRequests":30,"windowMs":60000},"spamDetection":{"commonPhrases":["spam","click here","ðŸ’°","free money"],"enabled":true,"maxScore":30,"scoreDecayMs":1800000}},"environment":"production","level":"info","message":"Telegram bot security enabled","service":"telegram-webhook","timestamp":"2025-10-04T13:02:05.458Z"}
{"address":"127.0.0.1","code":"ECONNREFUSED","errno":-4078,"level":"error","message":"Redis connection error in bot security: connect ECONNREFUSED 127.0.0.1:6379","port":6379,"service":"telegram-bot","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-10-04T13:02:05.480Z"}
{"level":"warn","message":"Redis connection failed for bot security, using in-memory fallback: Connection is closed.","service":"telegram-bot","stack":"Error: Connection is closed.\n    at EventEmitter.connectionCloseHandler (D:\\projects\\telegram-ecommerce-cms\\bot\\node_modules\\ioredis\\built\\Redis.js:208:28)\n    at Object.onceWrapper (node:events:623:26)\n    at EventEmitter.emit (node:events:508:28)\n    at EventEmitter.emit (node:domain:489:12)\n    at processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-10-04T13:02:05.481Z"}
{"address":"127.0.0.1","code":"ECONNREFUSED","errno":-4078,"level":"error","message":"Redis connection error in bot security: connect ECONNREFUSED 127.0.0.1:6379","port":6379,"service":"telegram-bot","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-10-04T13:02:05.593Z"}
{"error":{"code":"ETELEGRAM","message":"ETELEGRAM: 404 Not Found"},"level":"error","message":"Failed to start webhook service","service":"telegram-webhook","timestamp":"2025-10-04T13:02:05.763Z"}
